
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>ud07 FrameworksPHP Laravel actividades - Desarrollo Web en Entorno Servidor (DWES)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ejercicio-1-mostrar-tabla" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Desarrollo Web en Entorno Servidor (DWES)" class="md-header__button md-logo" aria-label="Desarrollo Web en Entorno Servidor (DWES)" data-md-component="logo">
      
  <img src="../../logo3.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Desarrollo Web en Entorno Servidor (DWES)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ud07 FrameworksPHP Laravel actividades
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Canvia a mode oscur"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Canvia a mode oscur" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Canvia a mode normal"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Canvia a mode normal" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Desarrollo Web en Entorno Servidor (DWES)" class="md-nav__button md-logo" aria-label="Desarrollo Web en Entorno Servidor (DWES)" data-md-component="logo">
      
  <img src="../../logo3.png" alt="logo">

    </a>
    Desarrollo Web en Entorno Servidor (DWES)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UD 1 Arquitectura Web
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            UD 1 Arquitectura Web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud01/ud0101/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.1 Introducción
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud01/ud0102/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.2 Cliente/servidor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud01/ud0103/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.3 Arquitectura de 3 capas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud01/ud0104/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.4 MVC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud01/ud0105/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.5 Decisiones de diseño
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud01/ud0106/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.6 Herramientas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud01/ud0107/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.7 Puesta en marcha
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud01/ud0108/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.8 Manual Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud01/ud01de/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Descargas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud01/ud01ac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Actividades
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud01/ud0109/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Referencias
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UD 2 Lenguaje PHP
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            UD 2 Lenguaje PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud02/ud0201/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.1 Introducción
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud02/ud0202/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.2 PHP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud02/ud0203/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.3 Operadores
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud02/ud0204/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.4 Arrays
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud02/ud0205/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.5 Funciones
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud02/ud0206/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.6 Funciones predefinidas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud02/ud0207/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.7 Expresiones regulares
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud02/ud02ac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Actividades
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ud02/ud0208/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Referencias
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../default/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UD 3 PHP Orientado a Objetos
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../default/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UD 4 Programación Web
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../default/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UD 5 Herramientas Web
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../default/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UD 6 Acceso a Base de Datos
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../default/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UD 7 Framework Laravel
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../default/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UD 8 Laravel avanzado
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#crear-controlador-y-modelo" class="md-nav__link">
    <span class="md-ellipsis">
      crear controlador y modelo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crear-tabla" class="md-nav__link">
    <span class="md-ellipsis">
      crear tabla
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crear-seeder" class="md-nav__link">
    <span class="md-ellipsis">
      crear seeder
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crear-ruta" class="md-nav__link">
    <span class="md-ellipsis">
      crear ruta
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crear-vista" class="md-nav__link">
    <span class="md-ellipsis">
      crear vista
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<hr />
<p>unit: unidad didáctica 7
   title: actividades
   language: ES
   author: Arturo Blasco
   subject: Desarrollo Web en Entorno Servidor
   keywords: [DWES, 2023, PHP, Laravel]
   IES: IES Mestre Ramón Esteve (Catadau) [iesmre.es]
   header: ${unit}: ${title} - ${subject} (versión: ${today})
   footer: ${currentFileName}.pdf - ${author} - ${IES} - ${pageNo}|${pageCount}
   typora-root-url:${filename}/../
   typora-copy-images-to:${filename}/../assets</p>
<hr />
<div class="toc">
<ul>
<li><a href="#ejercicio-1-mostrar-tabla">ejercicio 1. mostrar tabla</a><ul>
<li><a href="#crear-controlador-y-modelo">crear controlador y modelo</a></li>
<li><a href="#crear-tabla">crear tabla</a></li>
<li><a href="#crear-seeder">crear seeder</a></li>
<li><a href="#crear-ruta">crear ruta</a></li>
<li><a href="#crear-vista">crear vista</a></li>
</ul>
</li>
<li><a href="#ejercicio-2-insertar-registro">ejercicio 2. insertar registro</a><ul>
<li><a href="#crear-formulario">crear formulario</a></li>
<li><a href="#crear-pagina">crear página</a></li>
<li><a href="#crear-ruta-post">crear ruta post</a></li>
</ul>
</li>
</ul>
</div>
<blockquote>
<p><strong>A tener en cuenta</strong>:</p>
<ol>
<li>Dado que crearemos distintos elementos del framework Laravel desde Artisan con usuario <em>root</em> deberemos de tener en cuenta que, una vez creado dicho elemento, cambiar el <em>usuario:grupo</em> de ese fichero. Para acelerar esta tarea, desde la carpeta de Laravel:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>sudo<span class="w"> </span>chown<span class="w"> </span>tuUsuario:tuGrupo<span class="w"> </span>-R<span class="w"> </span>tuProyecto
</code></pre></div></td></tr></table></div>
<ol>
<li>Si, al intentar ejecutar la <em>migración</em> o un <em>seeder</em> el navegador muestra un error de permisos de acceso a la base de datos, deberemos de realizar tres tareas:</li>
</ol>
<p>a) Acceder al fichero <code>.env</code> de tu proyecto laravel y configurar el nombre de base de datos, usuario y contraseña:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span>
<span class="normal"><a href="#__codelineno-1-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="x">DB_CONNECTION=mysql</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="x">DB_HOST=127.0.0.1</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="x">DB_PORT=3306</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="x">DB_DATABASE=dwes</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="x">DB_USERNAME=dwes</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="x">DB_PASSWORD=dwes</span>
</code></pre></div></td></tr></table></div>
<p>b) Acceder a la base de datos (por ejemplo, mediante phpMyAdmin) y poner permisos al usuario en la base de datos del punto <em>a</em>.</p>
<p>c) Si todavía persisten los errores de permisos, ejecutar desde Artisan:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="x">sudo docker-compose exec myapp php artisan cache:clear</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="x">sudo docker-compose exec myapp php artisan config:clear</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="x">sudo docker-compose exec myapp php artisan config:cache</span>
</code></pre></div></td></tr></table></div>
</blockquote>
<h1 id="ejercicio-1-mostrar-tabla">ejercicio 1. mostrar tabla</h1>
<p>Sobre el proyecto de la sesión anterior, vamos a crear una página (vista) en la que se muestre el contenido de una tabla.a añadir un formulario (parecido) al que hemos estado creando (registro) pero que muestre (por ejemplo) un producto (como por ejemplo libros):</p>
<h2 id="crear-controlador-y-modelo">crear controlador y modelo</h2>
<p>Crear un <strong>controlador</strong> para la tabla <code>libros</code>. Para esto, recuerda:</p>
<ol>
<li>crear un controlador:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="x">sudo docker-compose exec myapp php artisan make:controller LibroController --model=Libro</span>
</code></pre></div></td></tr></table></div>
<p>Este comando generará, a la vez, un controlador y su modelo relacionado. <code>database/migrations</code>.</p>
<p>Esto creará el controlador en la carpeta <code>App\Http\Controllers</code> y el modelo en la carpeta <code>App\Models</code>.</p>
<ol>
<li>Si queremos mostrar todas las filas de la tabla <code>libros</code> creamos el siguiente método en el <strong>controlador</strong> anteriormente generado:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span>
<span class="normal"><a href="#__codelineno-4-6">6</a></span>
<span class="normal"><a href="#__codelineno-4-7">7</a></span>
<span class="normal"><a href="#__codelineno-4-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="x">    public function mostrarTodos()</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="x">    {</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="x">        // Obtener todas las filas de la tabla &quot;libro&quot;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="x">        $libros = Libro::all();</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="x">        // Pasar los datos a la vista</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="x">        return view(&#39;libros.mostrar&#39;, [&#39;libros&#39; =&gt; $libros]);</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="x">    }</span>
</code></pre></div></td></tr></table></div>
<p>En dicho método se aprecia que guarda en la variable <code>$libros</code> todos los libros de la tabla libros. A continuación, lanza una vista de nombre <code>mostrar.blade.php</code> almacenada en la carpeta <code>resources/views/libros</code> en la que pasa por parámetro la variable $libros anteriormente creada.</p>
<ol>
<li>Por otro lado, en el <strong>modelo</strong> debemos insertar en la clase <code>Libro</code> :</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="x">protected $table = &#39;libros&#39;;</span>
</code></pre></div></td></tr></table></div>
<h2 id="crear-tabla">crear tabla</h2>
<p>Crea una <strong>tabla</strong> <code>libros</code> en tu base de datos. Para esto, recuerda:</p>
<ol>
<li>crear una migración para crear la tabla libros:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="x">sudo docker-compose exec myapp php artisan make:migration create_libros_table</span>
</code></pre></div></td></tr></table></div>
<p>Este comando generará un nuevo archivo de migración en el directorio <code>database/migrations</code>.</p>
<ol>
<li>
<p>abre el archivo de migración recién creado. Puedes encontrarlo en el directorio <code>database/migrations</code> y tendrá un nombre similar a <code>2024_01_01_000000_create_libros_table.php</code> (la fecha y la hora pueden variar).</p>
</li>
<li>
<p>dentro del archivo de migración, encontrarás dos métodos: <code>up</code> y <code>down</code>. En el método <code>up</code>, define la estructura de la tabla "libro". Puedes hacerlo utilizando la sintaxis del constructor de esquemas de Laravel. Aquí hay un ejemplo básico:</p>
</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span>
<span class="normal"><a href="#__codelineno-7-16">16</a></span>
<span class="normal"><a href="#__codelineno-7-17">17</a></span>
<span class="normal"><a href="#__codelineno-7-18">18</a></span>
<span class="normal"><a href="#__codelineno-7-19">19</a></span>
<span class="normal"><a href="#__codelineno-7-20">20</a></span>
<span class="normal"><a href="#__codelineno-7-21">21</a></span>
<span class="normal"><a href="#__codelineno-7-22">22</a></span>
<span class="normal"><a href="#__codelineno-7-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="x">use Illuminate\Database\Migrations\Migration;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="x">use Illuminate\Database\Schema\Blueprint;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="x">use Illuminate\Support\Facades\Schema;</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="x">class CreateLibroTable extends Migration</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="x">{</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="x">    public function up()</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="x">    {</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="x">        Schema::create(&#39;libros&#39;, function (Blueprint $table) {</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="x">            $table-&gt;id();</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="x">            $table-&gt;string(&#39;titulo&#39;);</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="x">            $table-&gt;text(&#39;descripcion&#39;)-&gt;nullable();</span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="x">            // Agrega más columnas según sea necesario para tu aplicación</span>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="x">            $table-&gt;decimal(&#39;precio&#39;, 8, 2);</span>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="x">            $table-&gt;timestamps();</span>
<a id="__codelineno-7-16" name="__codelineno-7-16"></a><span class="x">        });</span>
<a id="__codelineno-7-17" name="__codelineno-7-17"></a><span class="x">    }</span>
<a id="__codelineno-7-18" name="__codelineno-7-18"></a>
<a id="__codelineno-7-19" name="__codelineno-7-19"></a><span class="x">    public function down()</span>
<a id="__codelineno-7-20" name="__codelineno-7-20"></a><span class="x">    {</span>
<a id="__codelineno-7-21" name="__codelineno-7-21"></a><span class="x">        Schema::dropIfExists(&#39;libros&#39;);</span>
<a id="__codelineno-7-22" name="__codelineno-7-22"></a><span class="x">    }</span>
<a id="__codelineno-7-23" name="__codelineno-7-23"></a><span class="x">}</span>
</code></pre></div></td></tr></table></div>
<p>En este ejemplo, la tabla <code>libros</code> tiene una columna de ID, un título, una descripción, un precio (que hemos añadido nosotros pues podemos personalizar la estructura de la tabla según nuestras necesidades) y las marcas de tiempo (<code>created_at</code> y <code>updated_at</code>). </p>
<ol>
<li>Después de definir la estructura de la tabla, ejecuta las migraciones con el siguiente comando:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="x">sudo docker-compose exec myapp php artisan migrate</span>
</code></pre></div></td></tr></table></div>
<p>Este comando aplicará la migración y creará la tabla "libro" en tu base de datos.</p>
<h2 id="crear-seeder">crear seeder</h2>
<p>Crea un <strong>seeder</strong> para introducir información:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="x">sudo docker-compose exec myapp php artisan make:seeder LibroSeeder</span>
</code></pre></div></td></tr></table></div>
<p>​   Este comando generará un nuevo archivo de seeder en el directorio <code>database/seeders</code>.</p>
<ol>
<li>abre el archivo de seeder recién creado. Puedes encontrarlo en el directorio <code>database/seeders</code> y tendrá un nombre similar a <code>LibroSeeder.php</code>. </li>
</ol>
<p>Dentro del archivo de seeder, dentro del método <code>run</code>, puedes utilizar el modelo <code>Libro</code> para insertar datos en la tabla. Asegúrate de tener el modelo <code>Libro</code> creado en tu aplicación. Aquí tienes un ejemplo básico:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span>
<span class="normal"><a href="#__codelineno-10-18">18</a></span>
<span class="normal"><a href="#__codelineno-10-19">19</a></span>
<span class="normal"><a href="#__codelineno-10-20">20</a></span>
<span class="normal"><a href="#__codelineno-10-21">21</a></span>
<span class="normal"><a href="#__codelineno-10-22">22</a></span>
<span class="normal"><a href="#__codelineno-10-23">23</a></span>
<span class="normal"><a href="#__codelineno-10-24">24</a></span>
<span class="normal"><a href="#__codelineno-10-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="x">use Illuminate\Database\Seeder;</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="x">use App\Models\Libro;</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="x">class LibroSeeder extends Seeder</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="x">{</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="x">    public function run()</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="x">    {</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="x">        // Ejemplo de inserción de datos en la tabla &quot;libro&quot;</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="x">        Libro::create([</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="x">            &#39;titulo&#39; =&gt; &#39;Libro 1&#39;,</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="x">            &#39;descripcion&#39; =&gt; &#39;Descripción del Libro 1&#39;,</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="x">            &#39;precio&#39; =&gt; 15.99,</span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="x">        ]);</span>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="x">        Libro::create([</span>
<a id="__codelineno-10-16" name="__codelineno-10-16"></a><span class="x">            &#39;titulo&#39; =&gt; &#39;Libro 2&#39;,</span>
<a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="x">            &#39;descripcion&#39; =&gt; &#39;Descripción del Libro 2&#39;,</span>
<a id="__codelineno-10-18" name="__codelineno-10-18"></a><span class="x">            &#39;precio&#39; =&gt; 21.50,</span>
<a id="__codelineno-10-19" name="__codelineno-10-19"></a><span class="x">        ]);</span>
<a id="__codelineno-10-20" name="__codelineno-10-20"></a>
<a id="__codelineno-10-21" name="__codelineno-10-21"></a><span class="x">        // ************************************</span>
<a id="__codelineno-10-22" name="__codelineno-10-22"></a><span class="x">        // AGREGA MÁS LIBROS (POR LO MENOS 5)</span>
<a id="__codelineno-10-23" name="__codelineno-10-23"></a><span class="x">        // ************************************</span>
<a id="__codelineno-10-24" name="__codelineno-10-24"></a><span class="x">    }</span>
<a id="__codelineno-10-25" name="__codelineno-10-25"></a><span class="x">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>ejecutar el seeder y insertar los datos en la tabla, utiliza el siguiente comando:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="x">sudo docker-compose exec myapp php artisan db:seed --class=LibroSeeder</span>
</code></pre></div></td></tr></table></div>
<p>​   Esto ejecutará el seeder que acabas de crear y agregaría los datos a la tabla "libro".</p>
<blockquote>
<p><strong>Recuerda</strong> que, además de ejecutar un seeder específico, también puedes utilizar el comando <code>php artisan db:seed</code> sin especificar un seeder en particular para ejecutar todos los seeders definidos en tu aplicación.</p>
</blockquote>
<h2 id="crear-ruta">crear ruta</h2>
<p>Crear una ruta para acceder a dicho formulario de inserción de libros (productos). </p>
<p>Para ello, recuerda introducir en el fichero <code>web.php</code> de la carpeta <code>routes</code> la ruta para lanzar el controlador-mostrarTodos (y, si no se introduce de forma automática, poner también el <code>use</code> que apunte a dicho controlador).</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="x">Route::get(&#39;/libros&#39;, [LibroController::class, &#39;mostrarTodos&#39;]) -&gt; name(&#39;libros&#39;);</span>
</code></pre></div></td></tr></table></div>
<h2 id="crear-vista">crear vista</h2>
<p>Crear la vista <code>resources/views/libros/mostrar.blade.php</code> e introducir el código para recorrer la variable $libros que se pasa desde el método <code>mostrarTodos</code> del controlador <code>LibroController</code> mediante una tabla html. Para esto, recuerda, utilizar la directiva <code>@foreach</code> ... <code>@foreach</code> y acceder a cada campo mediante <code>$libro-&gt;id</code> (por ejemplo).</p>
<p>Crea en tu página principal (del ejemplo seguido durante esta unidad) un enlace a dicha ruta para probar el ejercicio (también lo podrás probar añadiendo a la URL de la aplicación <code>/mostrar-libros</code>).</p>
<h1 id="ejercicio-2-insertar-registro">ejercicio 2. insertar registro</h1>
<p>Crear una página (vista) en la que se inserte un registro de la tabla libros. Un formulario (parecido) al que hemos estado creando (registro) pero que muestre un libro:</p>
<ol>
<li>Recuerda poner en el método <code>store</code> en el controlador:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="x">    public function store(Request $request) {</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="x">        // validaciones sobre los campos del formulario</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="x">        $this-&gt;validate($request, [</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="x">            &#39;titulo&#39; =&gt; [&#39;required&#39;, &#39;unique:libros&#39;],</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="x">            &#39;precio&#39; =&gt; [&#39;required&#39;, &#39;numeric&#39;,</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="x">                         &#39;min: 0&#39;,&#39;max:10000&#39;, </span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="x">                         &#39;regex:/^\d+(\.\d{1,2})?$/&#39;]</span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="x">        ]);    </span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="x">        // inserción en la tabla libros (modelo Libro)</span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="x">        Libro::create([</span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="x">            &#39;titulo&#39; =&gt; $request-&gt;titulo,</span>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="x">            &#39;descripcion&#39; =&gt; $request-&gt;descripcion,</span>
<a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="x">            &#39;precio&#39; =&gt; $request-&gt;precio</span>
<a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="x">     ]);</span>
<a id="__codelineno-13-17" name="__codelineno-13-17"></a>
<a id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="x">        // redireccionar hacia mostrarDatos</span>
<a id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="x">        return redirect() -&gt; route(&#39;libros&#39;);</span>
<a id="__codelineno-13-20" name="__codelineno-13-20"></a><span class="x">    }</span>
</code></pre></div></td></tr></table></div>
<p>​    Sobre la validación de campos del formulario:</p>
<ul>
<li><code>'max:10000'</code> para establecer un valor máximo permitido.</li>
<li><code>'regex:/^\d+(\.\d{1,2})?$/'</code> para permitir decimales con hasta dos lugares decimales.</li>
</ul>
<p>​    Sobre la inserción del registro completo en la tabla libros:</p>
<ul>
<li>Insert en Laravel es el método <code>create()</code> sobre el modelo en cuestión (en este caso Libro).</li>
<li>Recoge los campos del array $request y los guarda en cada atributo de la tabla libros.</li>
<li>Los campos autoincrementables <code>id</code>, <code>created_at</code> y <code>update_at</code> no se hacen referencia.</li>
</ul>
<p>​    Sobre la inserción del registro completo en la tabla libros:</p>
<ul>
<li>
<p>Después de validar e insertar en la tabla (por ese orden) se redireccionará a la ruta de nombre <code>libros</code> (que si nos fijamos en el fichero <code>web.php</code> hace referencia a <code>mostrar.blade.php</code>).</p>
</li>
<li>
<p>Por otro lado, en el <strong>modelo</strong> debemos insertar en la clase <code>Libro</code> :</p>
</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span>
<span class="normal"><a href="#__codelineno-14-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="x">    protected $fillable = [</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="x">        &#39;titulo&#39;,</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="x">        &#39;descripcion&#39;,</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="x">        &#39;precio&#39;,</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="x">    ];</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<p>En Laravel, el atributo <code>protected $fillable</code> se utiliza para especificar qué campos de una tabla de base de datos pueden ser asignados masivamente. Cuando se realiza una operación de asignación masiva, como al crear un nuevo modelo utilizando el método <code>create</code> o al actualizar un modelo mediante el método <code>update</code>, Laravel utiliza el conjunto de campos especificados en <code>$fillable</code> para determinar qué datos se deben incluir en la operación.</p>
<p>En este caso, al crear o actualizar un usuario, solo los campos <code>titulo</code>, <code>descripcion</code> y <code>precio</code> serán aceptados en una asignación masiva. Si intentas asignar otros campos no especificados en <code>$fillable</code>, Laravel lanzará una excepción <code>MassAssignmentException</code> para proteger contra la asignación masiva no autorizada.</p>
<p>Este enfoque ayuda a mejorar la seguridad al limitar qué campos pueden ser modificados de manera masiva, evitando posibles ataques de asignación masiva no autorizada. Es una práctica recomendada utilizar <code>$fillable</code> para definir explícitamente los campos que pueden ser asignados masivamente en lugar de permitir la asignación masiva de todos los campos con <code>$guarded</code>.</p>
</blockquote>
<h2 id="crear-formulario">crear formulario</h2>
<p>Puedes ayudarte en el ejemplo de la teoría <code>Register</code>. Recuerda:</p>
<ul>
<li>poner la directiva <code>@csrf</code> justo después de la etiqueta <code>&lt;form&gt;</code>.</li>
<li>recoger los errores mediante <code>@error  {{ $message }} @enderror</code>.</li>
</ul>
<h2 id="crear-pagina">crear página</h2>
<p>Como anteriormente, en el controlador, le hemos indicado que redirecciona a <code>App\resources\views\libros\mostrar.blade.php</code> </p>
<h2 id="crear-ruta-post">crear ruta post</h2>
<p>En <code>web.php</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PHP</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="x">Route::post(&#39;/libros&#39;, [LibroController::class, &#39;store&#39;]) -&gt; name(&#39;libros&#39;);</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<p><strong>¿Qué entregar?</strong></p>
<p>Como entrega de esta sesión deberás comprimir tu proyecto <strong>laravel</strong> con los cambios incorporados, y eliminando las carpetas <code>vendor</code> y <code>node_modules</code>. Renombra el archivo comprimido a <code>proyecto_07.zip</code>.</p>
</blockquote>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate", "navigation.footer", "navigation.top"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>